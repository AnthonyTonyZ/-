System.register("chunks:///_virtual/%E7%9E%92%E5%A4%A9%E4%B9%90%E6%B8%B8_%E6%9B%99%E5%BD%B1_%E5%BF%85%E6%9D%80%E6%8A%80.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Skill.ts","./cd.ts","./shiting.ts","./logUtil.ts","./wudi.ts","./yingshi.ts","./test.ts"],(function(t){var n,i,e,r,s,o,u,a,h;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy},function(t){e=t.Skill},function(t){r=t.cd},function(t){s=t.shiting},function(t){o=t.logUtil},function(t){u=t.wudi},function(t){a=t.yingshi},function(t){h=t.test}],execute:function(){i._RF.push({},"8e4538h3dxLYK7FyrGgOyaP","%E7%9E%92%E5%A4%A9%E4%B9%90%E6%B8%B8_%E6%9B%99%E5%BD%B1_%E5%BF%85%E6%9D%80%E6%8A%80",void 0);t("瞒天乐游_曙影_必杀技",function(t){function i(){for(var n,i=arguments.length,e=new Array(i),r=0;r<i;r++)e[r]=arguments[r];return(n=t.call.apply(t,[this].concat(e))||this).tempEnergy=void 0,n.yingshi=void 0,n}n(i,t);var e=i.prototype;return e.canCast=function(){return(new r).shouldTrigger(this)},e.cast=function(t,n){this.特性1(t,n),this.特性2(t),this.特性3(t),this.特性4(t)},e.特性1=function(t,n){this.tempEnergy=t.energy;var i=.085*this.tempEnergy+5.62;n.hp=n.hp-(i>11.66?11.66:i)*t.atk,t.energy=0,o.instance.log("test001","当前敌人生命值:"+n.hp);var e=new u;e.duration=1e3*this.duration,e.apply(t);var r=new s;r.duration=1e3*this.duration,r.apply(n)},e.特性2=function(t){this.yingshi=new a,this.yingshi.duration=1e3*this.duration,this.yingshi.apply(t)},e.特性3=function(t){t.energy=.05*this.tempEnergy,o.instance.log("test001","当前使用者能量回复:"+t.energy),t&&(t.energy=.08*this.tempEnergy);var n=new h;n.duration=1e3*this.duration,n.apply(t);var i=new h;i.duration=1e3*this.duration,i.apply(t)},e.特性4=function(t){var n=new h;n.duration=1e3*this.duration,n.apply(t);var i=new h;i.duration=1e3*this.duration,i.apply(t)},i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/actor.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"3e9f5VIwI1PZqtyw9FSktOv","actor",void 0);t("actor",(function(){this.id=void 0,this.hp=void 0,this.mp=void 0,this.energy=void 0,this.atk=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/ActorActionManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./PlayerCon.ts","./ActorProperty.ts","./Projectile.ts","./logUtil.ts","./AudioManager.ts"],(function(t){var e,o,i,n,r,a,s,l,h,c,g,d,u,p,v,m,y,A,f,C,T,I,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Vec2,l=t.Animation,h=t.CCFloat,c=t.v3,g=t.RigidBody2D,d=t.Collider2D,u=t.Contact2DType,p=t.math,v=t.director,m=t.Vec3,y=t.Component},function(t){A=t.Constant},function(t){f=t.PlayerCon},function(t){C=t.ActorProperty},function(t){T=t.Projectile},function(t){I=t.logUtil},function(t){S=t.AudioManager}],execute:function(){var P,N,w,O,D,E,M;r._RF.push({},"71e59Bm+c9Ca5gNgU1ksX3b","ActorActionManager",void 0);var F=a.ccclass,R=a.property,_=new s;t("ActorActionManager",(P=F("ActorActionManager"),N=R(l),w=R(h),P((E=e((D=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"animation",E,n(e)),e.currState=A.ACTION.Idle,e.rigidbody=null,e.collider=null,e.destForward=c(),i(e,"linearSpeed",M,n(e)),e.actorProperty=new C,e.log=I.instance,e.logLevel="ActorActionManager",e}o(e,t);var r=e.prototype;return r.start=function(){var t,e;this.log.log(this.logLevel,"start"),this.log.log("test_fight","[3:ActorActionManager:start]{标识:"+this.node.uuid+",hp:"+this.actorProperty.hp+",maxHp:"+this.actorProperty.maxHp+",attack:"+this.actorProperty.attack+",移动速度:"+this.linearSpeed+"}"),this.animation=null==(t=this.node.children[0])?void 0:t.getComponent(l),this.rigidbody=this.node.getComponent(g),this.collider=this.node.getComponent(d),this.collider.on(u.BEGIN_CONTACT,this.onTriggerEnter,this),null==(e=this.animation)||e.on(l.EventType.FINISHED,this.onAnimationFinished,this)},r.onDestroy=function(){var t,e;this.log.log(this.logLevel,"onDestroy"),null==(t=this.collider)||t.off(u.BEGIN_CONTACT,this.onTriggerEnter,this),null==(e=this.animation)||e.off(l.EventType.FINISHED,this.onAnimationFinished,this)},r.changeState=function(t){var e;this.log.log(this.logLevel,"changeState"),this.currState!=A.ACTION.Die&&(this.currState==A.ACTION.Run&&t!=A.ACTION.Run&&this.stopMove(),null==(e=this.animation)||e.crossFade(t,.1),this.currState=t)},r.update=function(t){switch(this.log.log(this.logLevel,"changeState",this.currState),this.currState){case A.ACTION.Run:this.doMove()}},r.onAnimationFinished=function(t,e){this.log.log(this.logLevel,"onAnimationFinished"),e.name==A.ACTION.Attack&&this.changeState(A.ACTION.Run),e.name==A.ACTION.Run&&this.changeState(A.ACTION.Run)},r.doMove=function(){this.log.log(this.logLevel,"doMove"+_.x);var t=this.linearSpeed*this.destForward.length();_.x=p.clamp(this.destForward.x,-1,1)*t,_.y=p.clamp(this.destForward.y,-1,1)*t,this.log.log("ORCA",this.logLevel+3+"移动预测{\n            节点id:"+this.node.uuid+",\n            刚体速度:"+_+",\n            目标方向:"+this.destForward+",\n        }"),this.rigidbody.linearVelocity=_},r.stopMove=function(){this.rigidbody.linearVelocity=s.ZERO,this.log.log(this.logLevel,"stopMove")},r.onTriggerEnter=function(t,e){this.log.log(this.logLevel,"碰撞行为{发起者:"+this.node.name+",self:"+t.node.name+",other:"+e.node.name+"}");var o=e.node.getComponent(T).host.getComponent(f).actor;this.hurt(o.actorProperty.attack,o),e.node.getComponent(T).onTriggerEnter(e,t)},r.hurt=function(t,e){var o,i,n,r,a,s;this.log.log(this.logLevel,"hurt"),this.changeState(A.ACTION.Hit),console.log("受伤音效"),S.instance.playSfx(A.DYNAMIC_RESOURCE.Audio.AudioName.SfxHit);var h=null==(o=this.node.children[2])?void 0:o.getComponent(l);h&&h.play(A.EFFECT.Explosion);var c=this.node.getComponent(f),g=null==e?void 0:e.node.getComponent(f);if(this.log.log("test_fight","粗略信息:"+(null==e?void 0:e.node.uuid)+"攻击"+this.node.uuid),this.log.log("test_fight","[4:ActorActionManager:hurt:扣血前:受伤]\n        {进攻方标识:"+(null!=(i=null==e?void 0:e.node.uuid)?i:"未知")+",伤害:"+t+",hp:"+(null!=(n=null==e?void 0:e.actorProperty.hp)?n:"未知")+",maxHp:"+(null!=(r=null==e?void 0:e.actorProperty.maxHp)?r:"未知")+",attack:"+(null!=(a=null==e?void 0:e.actorProperty.attack)?a:"未知")+",移动速度:"+(null!=(s=null==e?void 0:e.linearSpeed)?s:"未知")+"}\n        "+(g?"{攻击距离:"+g.attackRange+",视距:"+g.fov+",避距:"+g.vo+"}":"")+"\n        \n        {标识:"+this.node.uuid+",伤害:"+t+",hp:"+this.actorProperty.hp+",maxHp:"+this.actorProperty.maxHp+",attack:"+this.actorProperty.attack+",移动速度:"+this.linearSpeed+"}\n        "+(c?"{攻击距离:"+c.attackRange+",视距:"+c.fov+",避距:"+c.vo+"}":"")+"\n        "),this.currState!=A.ACTION.Die&&(this.actorProperty.hp-=t,this.log.log("test_fight","[4:ActorActionManager:hurt:扣血后]\n            {标识:"+this.node.uuid+",伤害:"+t+",hp:"+this.actorProperty.hp+",maxHp:"+this.actorProperty.maxHp+",attack:"+this.actorProperty.attack+",移动速度:"+this.linearSpeed+"}\n            "+(c?"{攻击距离:"+c.attackRange+",视距:"+c.fov+",避距:"+c.vo+"}":"")),this.actorProperty.hp<=0))if(c)this.onDie();else{var d=v.getScene(),u=this.node.name.includes("Wood"),p=u?"Canvas/UIGame/spawn/right/Wood_Tower":"Canvas/UIGame/spawn/left/Tower",m=u?"Canvas/UIGame/spawn/right/Wood_Tower_Destroyed":"Canvas/UIGame/spawn/left/Tower_Destroyed";this.scheduleOnce((function(){d.getChildByPath(p).active=!1,d.getChildByPath(m).active=!0,v.isPaused()?v.resume():v.pause()}),.1)}},r.onDie=function(){this.log.log("fight",this.node.name+"死亡"),this.currState!=A.ACTION.Die&&(this.changeState(A.ACTION.Die),this.node.emit(A.ACOTR_EVENT_NAME.onKilled,this))},r.respawn=function(){var t;this.log.log(this.logLevel,"respawn"),null==(t=this.animation)||t.crossFade(A.ACTION.Idle,.1),this.currState=A.ACTION.Idle,this.node.position=new m(0,0,0),this.actorProperty.hp=this.actorProperty.maxHp},e}(y)).prototype,"animation",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(D.prototype,"linearSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),O=D))||O));r._RF.pop()}}}));

System.register("chunks:///_virtual/ActorProperty.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"aba65aVptBBQJ3flGCN8XD8","ActorProperty",void 0);t("ActorProperty",(function(){this.maxHp=100,this.hp=this.maxHp,this.attack=10}));r._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationEventListener.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts"],(function(t){var n,e,i,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Component},function(t){r=t.Constant}],execute:function(){var s;e._RF.push({},"a8d63fHosJIi4UytV79YSqW","AnimationEventListener",void 0);var a=i.ccclass;t("AnimationEventListener",a("AnimationEventListener")(s=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.onFrameAttack=function(){var t;null==(t=this.node.parent)||t.emit(r.ACOTR_EVENT_NAME.onFrameAttack)},e}(o))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts"],(function(n){var t,e,o,i,a,s,r,c,u,l,h;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){o=n.cclegacy,i=n._decorator,a=n.director,s=n.resources,r=n.Prefab,c=n.instantiate,u=n.AudioSource,l=n.Component},function(n){h=n.Constant}],execute:function(){var g,f;o._RF.push({},"4d836L0GVhPx5h6god6nLuw","AudioManager",void 0);var d=i.ccclass;n("AudioManager",d("AudioManager")(((f=function(n){function o(){for(var t,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this).bgm=null,t.sfx=new Map,t}t(o,n);var i=o.prototype;return i.onLoad=function(){o._instance=this},i.onDestroy=function(){o._instance=null},i.init=function(){console.log("audioNode :start");var n=a.getScene().getChildByPath("Canvas/UIGame/audio"),t=this.sfx;s.loadDir(h.DYNAMIC_RESOURCE.Audio.AllPath,r,(function(e,o){o.forEach((function(e){var o=c(e);n.addChild(o);var i=o.getComponent(u);t.set(e.name,i)}))}))},i.playBgm=function(){if(this.bgm){this.bgm&&this.bgm.stop();var n=this.bgm.node;n.active=!0;var t=n.getComponent(u);this.bgm=t}},i.playSfx=function(n){this.sfx.has(n)&&this.sfx.get(n).play()},i.onBgmVolumeChanged=function(){this.bgm},e(o,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new o),this._instance}}]),o}(l))._instance=void 0,g=f))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/AutoActorCon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pools.ts","./logUtil.ts","./PlayerCon.ts","./ActorActionManager.ts","./AnimationEventListener.ts","./ProjectileEmiter.ts","./Constant.ts"],(function(e){var t,o,n,r,i,a,c,s,l,m,u,h,d,g,p,f,y;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,r=e.resources,i=e.Prefab,a=e.instantiate,c=e.Label,s=e.math,l=e.Component},function(e){m=e.Pools},function(e){u=e.logUtil},function(e){h=e.PlayerCon,d=e.AttackType},function(e){g=e.ActorActionManager},function(e){p=e.AnimationEventListener},function(e){f=e.ProjectileEmitter},function(e){y=e.Constant}],execute:function(){var P;o._RF.push({},"41064bTQCpJno/7tXqh0r4C","AutoActorCon",void 0);var v=n.ccclass;e("AutoActorCon",v("AutoActorCon")(P=function(e){function o(t){var o;return(o=e.call(this)||this).log=u.instance,o.logLevel="AutoActorCon",o.enemyPools=new m,o.enemyNames=[],o.enemies=[],o.enemyPath=void 0,o.enemyPath=t,o}t(o,e);var n=o.prototype;return n.init=function(){var e=this;return new Promise((function(t){e.log.log(e.logLevel,"init"),r.loadDir(e.enemyPath,(function(){var o=[];r.getDirWithPath(e.enemyPath,i,o);for(var n=0,a=o;n<a.length;n++){var c=a[n],s=r.get(c.path,i);e.createEnemyPool(s)}t()})),e.log.log(e.logLevel,"加载结束")}))},n.createEnemyPool=function(e){this.enemyNames.push(e.name),this.enemyPools.newPool(e.name,(function(){var t=a(e);return t.active=!1,t.addComponent(h).actor=t.addComponent(g),t.children[0].addComponent(p),t.children[1].getComponent(c).string=t.uuid,t}),1,(function(e){e.removeFromParent()}))},n.createRandomEnemy=function(e,t,o,n){var a=this.enemyNames[s.randomRangeInt(0,this.enemyNames.length)],c=this.enemyPools.allocc(a),l=c.getComponent(h);if(l.destForward=t.worldPosition,l.regime=o,l.career=n,n==d.Range&&!c.getComponent(f)){var m=c.addComponent(f);r.load(o==y.DYNAMIC_RESOURCE.Actor.Forces1.Regime?"model/projectile/arrow":"model/projectile/arrow-001",i,(function(e,t){m.projectile=t,m.init(),l.projectileEmitter=m}))}return c.active=!0,l.actor.respawn(),e.addChild(c),this.enemies.push(c),this.log.log("fight","生成{节点id:"+c.uuid+",位置:"+c.position+",血量:"+l.actor.actorProperty.hp+"}"),c},n.clear=function(){this.enemyPools.destroyAll(),this.enemyNames=[],this.enemies=[]},o}(l))||P);o._RF.pop()}}}));

System.register("chunks:///_virtual/cd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IEffectContainer.ts"],(function(e){var t,n,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){r=e.Trigger}],execute:function(){n._RF.push({},"748c6s/HvVDA6OhU0JbyNNv","cd",void 0);e("cd",function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.shouldTrigger=function(e){var t=e.cd[e.level-1];return Date.now()-e.lastUsedTime>=1e3*t},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/CoinCon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./logUtil.ts","./Pools.ts","./CoinManager.ts","./Constant.ts"],(function(o){var t,n,e,i,r,l,a,c,s,p,u;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator,i=o.resources,r=o.Prefab,l=o.instantiate,a=o.Component},function(o){c=o.logUtil},function(o){s=o.Pools},function(o){p=o.CoinManager},function(o){u=o.Constant}],execute:function(){var C;n._RF.push({},"97cbcdJjotKkJe5o83r6Pm1","CoinCon",void 0);var g=e.ccclass;o("CoinCon",g("CoinCon")(C=function(o){function n(t){var n;return(n=o.call(this)||this).log=c.instance,n.logLevel="CoinCon",n.propPath=void 0,n.propPools=new s,n.prefabName="G_Idle",n.propPath=t,n}t(n,o);var e=n.prototype;return e.init=function(){var o=this;return new Promise((function(t){o.log.log(o.logLevel,"init"),i.loadDir(o.propPath,(function(){var n=[];i.getDirWithPath(o.propPath,r,n);for(var e=0,l=n;e<l.length;e++){var a=l[e],c=i.get(a.path,r);o.createPropPool(c)}t()})),o.log.log(o.logLevel,"加载结束")}))},e.createPropPool=function(o){this.propPools.newPool(o.name,(function(){var t=l(o);return t.addComponent(p),t.active=!1,t}),1,(function(o){o.removeFromParent()}))},e.createCoin=function(o){var t=this.propPools.allocc(this.prefabName);t.active=!0,t.getComponent(p).coinProperty.isCollectible=!0,t.setPosition(o.position),o.parent.addChild(t),t.once(u.EVENT_NAME.onCoinCollect,this.onCoinCollect,this),this.log.log(this.logLevel,"createCoin")},e.onCoinCollect=function(o){var t=this;this.log.log(this.logLevel,"onCoinCollect"),this.log.log("fight","自动拾取2"),this.scheduleOnce((function(){var n=o.getComponent(p).coinProperty;n.isCollectible=!1,n.dropTime=0,o.active=!1,t.propPools.free(t.prefabName,o)}),.1)},n}(a))||C);n._RF.pop()}}}));

System.register("chunks:///_virtual/CoinManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./logUtil.ts"],(function(t){var o,i,n,e,r,s;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,e=t.Component},function(t){r=t.Constant},function(t){s=t.logUtil}],execute:function(){var c;i._RF.push({},"ea0f60M/slNpIKAUPFsm7A5","CoinManager",void 0);var a=n.ccclass,l=t("coinProperty",(function(){this.amount=1,this.dropTime=0,this.liftTime=2,this.isCollectible=!1,this.position=void 0}));t("CoinManager",a("CoinManager")(c=function(t){function i(){for(var o,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(o=t.call.apply(t,[this].concat(n))||this).coinProperty=new l,o.log=s.instance,o.logLevel="CoinManager",o}o(i,t);var n=i.prototype;return n.fire=function(){this.coinProperty.dropTime=0},n.update=function(t){this.coinProperty.dropTime+=t,this.coinProperty.dropTime>=this.coinProperty.liftTime&&(this.log.log("fight","自动拾取1"),this.node.emit(r.EVENT_NAME.onCoinCollect,this.node))},i}(e))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/Constant.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"e7299SSTJpM/6hp+oUFXXcs","Constant",void 0);var t=e("Constant",(function(){}));t.LOG_CONTENT_LEVEL="null",t.LOG_ALL_LABEL="all",t.ACTION={Idle:"idle",Attack:"attack",Run:"run",Hit:"hit",Die:"die"},t.EFFECT={Explosion:"explosion",Fire:"fire",GSpawn:"g_spawn",MSpawn:"m_spawn",WSpawn:"w_spawn"},t.EVENT_NAME={onBgmVolumeChanged:"onBgmVolumeChanged",onProjectileDead:"onProjectileDead",onCoinCollect:"onCoinCollect"},t.ACOTR_EVENT_NAME={onHurt:"hurt",onKilled:"killed",onFrameAttack:"onFrameAttack"},t.DYNAMIC_RESOURCE={Actor:{Forces1:{Regime:"left",Path:"model/actor"},Forces2:{Regime:"right",Path:"model/actor2"}},Audio:{AllPath:"audio/sfx/",AudioName:{SfxHit:"SfxHit"}},Prop:{Path:"model/prop"}},o._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor.ts"],(function(e){var n,t,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){c=e.actor}],execute:function(){t._RF.push({},"bf3edRAcclKUY9r7kpC2jFP","enemy",void 0);e("enemy",function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/Equipment.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"1eb3baOdHpCZK+/ZqA9uQ+X","Equipment",void 0);n("Equipment",function(){function n(){}var t=n.prototype;return t.equip=function(){},t.unequip=function(){},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/IEffectContainer.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"3d7bfxCa2xPmZ5SVgGpuIzY","IEffectContainer",void 0);t("Effect",function(){function t(){this.timerId=void 0,this.duration=void 0}var n=t.prototype;return n.apply=function(t){},n.remove=function(t){},t}()),t("Trigger",function(){function t(){}return t.prototype.shouldTrigger=function(t){return!1},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/IEquipment.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"59f4242RCZHhoM3dQImoALE","IEquipment",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/IHero.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"7ca93jucpVNe7sz6OuNkiNa","IHero",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IItem.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"744e3JLsiNNoroRbQM4JNer","IItem",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IRune.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"dd22dWfBWZKMIQBfYSmswv4","IRune",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ISkill.ts",["cc"],(function(){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"cac94gHSBpIL5IkA2dhsElE","ISkill",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"6fadadRmExFNZ4uPpqf5HHb","Item",void 0);t("Item",function(){function t(){}return t.prototype.use=function(){},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/junit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./%E7%9E%92%E5%A4%A9%E4%B9%90%E6%B8%B8_%E6%9B%99%E5%BD%B1_%E5%BF%85%E6%9D%80%E6%8A%80.ts","./logUtil.ts","./ResourceUtil.ts"],(function(n){var t,o,e,i,r,s,c,a,l,u;return{setters:[function(n){t=n.inheritsLoose,o=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){i=n.cclegacy,r=n._decorator,s=n.Component,c=n.JsonAsset},function(n){a=n.瞒天乐游_曙影_必杀技},function(n){l=n.logUtil},function(n){u=n.ResourceUtil}],execute:function(){var g;i._RF.push({},"be9f5GVQ75JBplrLDsSaUtL","junit",void 0);var p=r.ccclass;r.property,n("junitTs",p("junitTs")(g=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var r=i.prototype;return r.egMin=function(){console.log("1")},r.egMax=function(){console.log("--------------------Start--------------------"),console.log("--------------------Deal--------------------"),console.log("--------------------Done--------------------")},r.onLoad=function(){},r.start=function(){this.二维动画控制_egMin()},r.update=function(n){},r.二维动画控制_egMin=function(){},r.logUtil_egMin=function(){var n="你妈妈的温",t=l.instance;t.log("less",""+n),t.log("Coin",n+"+1")},r.瞒天乐游_曙影_必杀技_egMax=function(){var n=o(e().mark((function n(){var t,o,i,r,s;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("--------------------Start--------------------"),n.next=3,u.loadResType("data/skill",c);case 3:t=n.sent,o=t.json.RECORDS,i=new a(o[0]),r={attackPower:void 0,atk:100,energy:200,hp:0,id:0,isStarRingActive:void 0,lastUltimateUsedTime:void 0,starRingDuration:void 0,starRingEnergy:void 0},s={atk:100,energy:200,hp:50,id:0,mp:80},console.log("--------------------Deal--------------------"),i.canCast()&&i.cast(r,s),i.yingshi&&i.yingshi.remove(null),console.log("--------------------Done--------------------");case 12:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),i}(s))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/LevelCon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./logUtil.ts","./AutoActorCon.ts","./CoinCon.ts","./PlayerCon.ts","./AudioManager.ts"],(function(t){var e,n,o,r,i,a,s,c,l,u,h,C,p,f,A,g,d,m,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.createClass,a=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){c=t.cclegacy,l=t._decorator,u=t.Node,h=t.PhysicsSystem2D,C=t.director,p=t.Component},function(t){f=t.Constant},function(t){A=t.logUtil},function(t){g=t.AutoActorCon},function(t){d=t.CoinCon},function(t){m=t.PlayerCon},function(t){v=t.AudioManager}],execute:function(){var y,w,R,S,N,P,_,E;c._RF.push({},"9f145lhtnJNAagLrAc0fzuC","LevelCon",void 0);var L=l.ccclass,U=l.property;t("LevelCon",(y=L("LevelCon"),w=U(u),R=U(u),y(((E=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,o(e,"spawnNode",P,r(e)),o(e,"destNode",_,r(e)),e.log=A.instance,e.logLevel="LevelCon",e.forces1AutoActorCon=null,e.forces2AutoActorCon=null,e.coinCon=null,e.test_maxAlive=10,e}n(e,t);var c=e.prototype;return c.start=function(){this.log.log(this.logLevel,"start"),h.instance.enable=!0,this.init()},c.init=function(){var t=a(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.forces1AutoActorCon=new g(f.DYNAMIC_RESOURCE.Actor.Forces1.Path),t.next=3,this.forces1AutoActorCon.init();case 3:return this.forces2AutoActorCon=new g(f.DYNAMIC_RESOURCE.Actor.Forces2.Path),t.next=6,this.forces2AutoActorCon.init();case 6:return this.coinCon=new d(f.DYNAMIC_RESOURCE.Prop.Path),t.next=9,this.coinCon.init();case 9:this.startSpawnTimer(),v.instance.init(),console.log("audioNode :end");case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.startSpawnTimer=function(){var t=this;this.log.log(this.logLevel,"startSpawnTimer"),this.forces1AutoActorCon.enemies.push(C.getScene().getChildByPath("Canvas/UIGame/spawn/left/Tower")),this.forces2AutoActorCon.enemies.push(C.getScene().getChildByPath("Canvas/UIGame/spawn/right/Wood_Tower")),this.schedule((function(){t.randomSpawn()}),3,100,1)},c.randomSpawn=function(){if(!(this.forces1AutoActorCon.enemies.length+this.forces2AutoActorCon.enemies.length>=this.test_maxAlive)){var t=this.forces1AutoActorCon.createRandomEnemy(this.spawnNode,this.destNode,f.DYNAMIC_RESOURCE.Actor.Forces1.Regime,1).getComponent(m);t.actor.actorProperty.hp=100,t.actor.actorProperty.attack=10,t.actor.linearSpeed=4,t.attackRange=200,t.fov=400,t.vo=150;var e=this.forces2AutoActorCon.createRandomEnemy(this.destNode,this.spawnNode,f.DYNAMIC_RESOURCE.Actor.Forces2.Regime,1).getComponent(m);e.actor.actorProperty.hp=100,e.actor.actorProperty.attack=10,e.actor.linearSpeed=5,e.attackRange=200,e.fov=400,e.vo=150}},i(e,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=C.getScene().getChildByPath("Canvas/UIGame").getComponent(e)),this._instance}}]),e}(p))._instance=void 0,P=e((N=E).prototype,"spawnNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(N.prototype,"destNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=N))||S));c._RF.pop()}}}));

System.register("chunks:///_virtual/logUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts"],(function(n){var t,e,o;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy},function(n){o=n.Constant}],execute:function(){e._RF.push({},"a045bIWFZ1AWIsstCgj2HvT","logUtil",void 0),n("logUtil",function(){function n(){this.LOG_LEVEL={TRACE:"trace",LOG:"log",INFO:"info",WARN:"warn",ERROR:"error"}}var e=n.prototype;return e.log1=function(n,t,e){for(var i=arguments.length,s=new Array(i>3?i-3:0),l=3;l<i;l++)s[l-3]=arguments[l];var r,c;t!=o.LOG_ALL_LABEL?t.includes(n)&&(r=console)[e].apply(r,s):(c=console)[e].apply(c,s)},e.log=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];this.log1.apply(this,[n,o.LOG_CONTENT_LEVEL,this.LOG_LEVEL.LOG,n].concat(e))},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./actor.ts","./enemy.ts","./player.ts","./junit.ts","./Constant.ts","./AutoActorCon.ts","./CoinCon.ts","./LevelCon.ts","./PlayerCon.ts","./ActorProperty.ts","./Projectile.ts","./ProjectileEmiter.ts","./ProjectileProperty.ts","./IEquipment.ts","./IHero.ts","./IItem.ts","./IRune.ts","./ISkill.ts","./Equipment.ts","./Item.ts","./Pools.ts","./Rune.ts","./Skill.ts","./%E7%9E%92%E5%A4%A9%E4%B9%90%E6%B8%B8_%E6%9B%99%E5%BD%B1_%E5%BF%85%E6%9D%80%E6%8A%80.ts","./IEffectContainer.ts","./shiting.ts","./test.ts","./wudi.ts","./yingshi.ts","./cd.ts","./AnimationEventListener.ts","./ActorActionManager.ts","./AudioManager.ts","./CoinManager.ts","./ResourceUtil.ts","./Util.ts","./logUtil.ts","./UIGame.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./actor.ts"],(function(t){var r,e,i;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.actor}],execute:function(){e._RF.push({},"6f967g9J1JGC5frX8mv1UJZ","player",void 0);t("player",function(t){function e(){for(var r,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(r=t.call.apply(t,[this].concat(i))||this).attackPower=void 0,r.starRingDuration=void 0,r.starRingEnergy=void 0,r.isStarRingActive=void 0,r.lastUltimateUsedTime=void 0,r}return r(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerCon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./ActorActionManager.ts","./logUtil.ts","./ProjectileEmiter.ts","./LevelCon.ts"],(function(t){var e,o,i,n,r,s,a,l,c,h,d,u,g,f,v,A,m,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,a=t._decorator,l=t.ccenum,c=t.CCFloat,h=t.UITransform,d=t.Vec3,u=t.v3,g=t.Component},function(t){f=t.Constant},function(t){v=t.ActorActionManager},function(t){A=t.logUtil},function(t){m=t.ProjectileEmitter},function(t){C=t.LevelCon}],execute:function(){var R,p,w,P,E,y,k,F,b,N,O;s._RF.push({},"fd02bFZu39Oubi1G3kDe/2Z","PlayerCon",void 0);var I=a.ccclass,T=a.property,L=t("AttackType",function(t){return t[t.Melee=0]="Melee",t[t.Range=1]="Range",t[t.Blaster=2]="Blaster",t}({}));l(L);t("PlayerCon",(R=I("PlayerCon"),p=T(c),w=T(c),P=T(c),E=T({type:L}),R((F=e((k=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).actor=null,e.log=A.instance,e.logLevel="PlayerCon",e.destForward=void 0,e.target=null,i(e,"attackRange",F,n(e)),i(e,"fov",b,n(e)),i(e,"vo",N,n(e)),e.regime=void 0,i(e,"career",O,n(e)),e.projectileEmitter=void 0,e}o(e,t);var s=e.prototype;return s.start=function(){this.log.log(this.logLevel,"start");var t=this.node.getComponent(h).width;this.fov+=t/2,this.attackRange+=t/2,this.node.on(f.ACOTR_EVENT_NAME.onKilled,this.onKilled,this),this.node.on(f.ACOTR_EVENT_NAME.onFrameAttack,this.onFrameAttack,this)},s.update=function(t){this.executeAI()},s.onDestroy=function(){this.log.log(this.logLevel,"onDestroy"),this.node.off(f.ACOTR_EVENT_NAME.onKilled,this.onKilled,this),this.node.off(f.ACOTR_EVENT_NAME.onFrameAttack,this.onFrameAttack,this)},s.executeAI=function(){this.log.log(this.logLevel,this.node.uuid+"节点数据{\n            fov:"+this.fov+",attackRange:"+this.attackRange+",vo:"+this.vo+",\n            worldPosition:"+this.node.worldPosition+",阵营:"+this.regime+"}"),this.checkAndAttack()||this.moveToEndPoint()},s.getNeareastEnemy=function(){var t=this.discoverUnitsInRange(this.findEnemies(),this.fov);return t?(this.target=t.getComponent(v),this.log.log(this.logLevel,"getNeareastEnemy "+this.node.uuid+"找到敌人"+t.uuid),t):(this.log.log(this.logLevel,"getNeareastEnemy "+this.node.uuid+"未找到敌人"),null)},s.checkAndAttack=function(){var t=this.getNeareastEnemy();if(t){var e=d.distance(this.node.worldPosition,t.worldPosition);if(!(e>this.fov))return e<=this.attackRange?(this.actor.changeState(f.ACTION.Attack),!0):(this.log.log("ORCA",this.logLevel+1+"追击{\n                    节点id:"+this.node.uuid+",距离:"+e+",\n                    enemy:"+t.worldPosition+",node:"+this.node.worldPosition+",\n                }"),this.ORCA()&&(this.log.log("ORCA","无需避障进攻敌人{节点id:"+this.node.uuid+",距离:"+e+",}"),d.subtract(this.actor.destForward,t.worldPosition,this.node.worldPosition),this.actor.destForward.normalize(),this.actor.changeState(f.ACTION.Run)),!0)}return!1},s.ORCA=function(){if(this.discoverUnitsInRange(this.findAllies(),this.attackRange)){var t=this.regime==f.DYNAMIC_RESOURCE.Actor.Forces1.Regime?this.vo:-this.vo,e=u(this.node.worldPosition.x+t,(this.node.worldPosition.y+this.vo)*(Math.random()<.5?-1:1),this.node.worldPosition.z);return d.subtract(this.actor.destForward,e,this.node.worldPosition),this.actor.destForward.normalize(),this.log.log("ORCA",this.logLevel+2+"开始避障{\n            节点id:"+this.node.uuid+",目标方向:"+this.actor.destForward+"\n            fov:"+this.fov+",attackRange:"+this.attackRange+",vo:"+this.vo+"\n            }"),this.actor.changeState(f.ACTION.Run),!1}return!0},s.moveToEndPoint=function(){this.log.log(this.logLevel,"moveToEndPoint 下当前x位置:"+this.node.worldPosition.x+","+this.destForward.x),d.subtract(this.actor.destForward,this.destForward,this.node.worldPosition),this.actor.destForward.normalize(),this.actor.changeState(f.ACTION.Run)},s.onFrameAttack=function(){switch(this.log.log("fight",this.node.name+"触发攻击动画帧"),this.career){case L.Range:var t=this.projectileEmitter.create();t.node.worldPosition=this.node.worldPosition,t.target=this.target.node,t.host=this.node,t.fire();break;case L.Blaster:this.target.hurt(this.actor.actorProperty.attack,this.actor),this.actor.hurt(this.actor.actorProperty.hp,this.actor);break;default:this.target.hurt(this.actor.actorProperty.attack,this.actor)}},s.findEnemies=function(){var t,e;return this.regime==f.DYNAMIC_RESOURCE.Actor.Forces1.Regime?null==(t=C.instance.forces2AutoActorCon)?void 0:t.enemies:null==(e=C.instance.forces1AutoActorCon)?void 0:e.enemies},s.findAllies=function(){var t,e;return this.regime==f.DYNAMIC_RESOURCE.Actor.Forces1.Regime?null==(t=C.instance.forces1AutoActorCon)?void 0:t.enemies:null==(e=C.instance.forces2AutoActorCon)?void 0:e.enemies},s.discoverUnitsInRange=function(t,e){this.log.log(this.logLevel,"discoverUnitsInRange "+this.node.uuid+"搜索最近的单位");var o=null;if(!t||0==(null==t?void 0:t.length))return this.log.log(this.logLevel,"discoverUnitsInRange "+this.node.uuid+"单位群体未初始化"),null;for(var i,n=1300,s=r(t);!(i=s()).done;){var a=i.value;if(1==a.active&&a.uuid!=this.node.uuid){var l=d.distance(this.node.worldPosition,a.worldPosition);l<e&&n>l&&(n=l,o=a)}}return o},s.onKilled=function(){var t=this;this.scheduleOnce((function(){var e,o,i=t.node.getComponent(m);if(i&&t.node.children.length>3)for(var n=3;n<t.node.children.length;n++){var r=t.node.children[n];r.name.includes("arrow")&&(r.active=!1,i.prefabPool.free(i.prefabName,r))}t.regime==f.DYNAMIC_RESOURCE.Actor.Forces1.Regime?null==(e=C.instance.forces1AutoActorCon)||e.enemyPools.free(t.node.name,t.node):(null==(o=C.instance.forces2AutoActorCon)||o.enemyPools.free(t.node.name,t.node),C.instance.coinCon.createCoin(t.node));var s=t.findAllies();s.splice(s.indexOf(t.node),1),t.node.active=!1}),.1)},e}(g)).prototype,"attackRange",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),b=e(k.prototype,"fov",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),N=e(k.prototype,"vo",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),O=e(k.prototype,"career",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.Melee}}),y=k))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/Pools.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,r,s;return{setters:[function(o){t=o.createForOfIteratorHelperLoose},function(o){e=o.cclegacy,r=o._decorator,s=o.Pool}],execute:function(){var n;e._RF.push({},"743c8d8zGdMFLc5wcPz0W+v","Pools",void 0);var l=r.ccclass;o("Pools",l("Pools")(n=function(){function o(){this.pools=new Map}var e=o.prototype;return e.pool=function(o){return this.pools.get(o)},e.newPool=function(o,t,e,r){var n=new s(t,e,r);this.pools.set(o,n)},e.allocc=function(o){return this.pool(o).alloc()},e.free=function(o,t){this.pool(o).free(t)},e.destory=function(o){this.pool(o).destroy()},e.destroyAll=function(){for(var o,e=t(this.pools.values());!(o=e()).done;){o.value.destroy()}this.pools.clear()},o}())||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/Projectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./ProjectileProperty.ts","./logUtil.ts"],(function(t){var e,i,o,r,n,s,l,a,c,d,h,p,u,g,y,f,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,l=t.Vec2,a=t.CCFloat,c=t.v3,d=t.RigidBody2D,h=t.Collider2D,p=t.Vec3,u=t.math,g=t.Component},function(t){y=t.Constant},function(t){f=t.ProjectileProperty},function(t){m=t.logUtil}],execute:function(){var P,v,j,w,F;n._RF.push({},"3d83d2FKN1LDbDkjsvIir2Y","Projectile",void 0);var b=s.ccclass,C=s.property,D=new l;t("Projectile",(P=b("Projectile"),v=C(a),P((F=e((w=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).collider=null,e.rigidbody=null,e.startTime=0,e.projectProperty=new f,e.host=null,e.target=null,e.destForward=c(),e.log=m.instance,e.logLevel="Projectile",o(e,"linearSpeed",F,r(e)),e}i(e,t);var n=e.prototype;return n.start=function(){this.rigidbody=this.node.getComponent(d),this.collider=this.node.getComponent(h)},n.fire=function(){this.startTime=0,p.subtract(this.destForward,this.target.worldPosition,this.node.worldPosition),this.destForward.normalize()},n.update=function(t){this.startTime+=t,this.startTime>=this.projectProperty.liftTime&&(this.log.log(this.logLevel,"定时消失"),this.node.emit(y.EVENT_NAME.onProjectileDead,this)),this.doMove()},n.doMove=function(){var t=this.linearSpeed*this.destForward.length();D.x=u.clamp(this.destForward.x,-1,1)*t,D.y=u.clamp(this.destForward.y,-1,1)*t,this.log.log("ORCA",this.logLevel+3+"移动预测{\n            节点id:"+this.node.uuid+",\n            刚体速度:"+D+",\n            目标方向:"+this.destForward+",\n        }"),this.rigidbody.linearVelocity=D},n.onTriggerEnter=function(t,e){this.log.log(this.logLevel,"碰撞行为{发起者:"+this.host.name+",self:"+t.node.name+",other:"+e.node.name+"}"),this.projectProperty.penetration--,this.projectProperty.penetration<=0&&this.node.emit(y.EVENT_NAME.onProjectileDead,this)},e}(g)).prototype,"linearSpeed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=w))||j));n._RF.pop()}}}));

System.register("chunks:///_virtual/ProjectileEmiter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constant.ts","./Projectile.ts","./logUtil.ts","./Pools.ts"],(function(e){var t,o,i,n,r,l,a,c,s,u,f,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Prefab,c=e.instantiate,s=e.Component},function(e){u=e.Constant},function(e){f=e.Projectile},function(e){p=e.logUtil},function(e){h=e.Pools}],execute:function(){var P,d,v,g,m;r._RF.push({},"ad563gyVdJBA7hP53BnMFaJ","ProjectileEmiter",void 0);var j=l.ccclass,b=l.property;e("ProjectileEmitter",(P=j("ProjectileEmitter"),d=b(a),P((m=t((g=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"projectile",m,n(t)),t.prefabPool=new h,t.log=p.instance,t.logLevel="ProjectileEmitter",t.prefabName="projectile",t}o(t,e);var r=t.prototype;return r.init=function(){var e=this;this.prefabPool.newPool(this.prefabName,(function(){var t=c(e.projectile);return t.active=!1,t}),1,(function(e){e.removeFromParent()}))},r.onDestroy=function(){this.prefabPool.destroyAll()},r.create=function(){this.log.log(this.logLevel,this.node.name+"create");var e=this.prefabPool.allocc(this.prefabName);return this.node.addChild(e),e.active=!0,e.once(u.EVENT_NAME.onProjectileDead,this.onProjectileDead,this),e.getComponent(f)},r.onProjectileDead=function(e){var t=this;this.log.log(this.logLevel,this.node.name+"onProjectileDead"),this.scheduleOnce((function(){e.node.active=!1,t.prefabPool.free(t.prefabName,e.node)}),.1)},t}(s)).prototype,"projectile",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=g))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/ProjectileProperty.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"b08ceM+i2BBa6mnLJ7oELWE","ProjectileProperty",void 0);e("ProjectileProperty",(function(){this.penetration=1,this.liftTime=3,this.chase=!1}));t._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceUtil.ts",["cc"],(function(e){var n,o,t,r,i,c,u;return{setters:[function(e){n=e.cclegacy,o=e._decorator,t=e.resources,r=e.error,i=e.Prefab,c=e.instantiate,u=e.find}],execute:function(){var s;n._RF.push({},"c4e207OqutFgL/WnQdSr7jP","ResourceUtil",void 0);var a=o.ccclass;e("ResourceUtil",a("ResourceUtil")(s=function(){function e(){}return e.loadRes=function(e,n,o){void 0===o&&(o=function(){}),console.log("loadRes"),t.load(e,(function(e,n){if(e)return r(e.message||e),void o(e,n);o&&o(null,n)}))},e.loadResType=function(e,n){return new Promise((function(o,i){t.load(e,n,(function(e,n){if(e)return r(e.message||e),void(i&&i(e));o&&o(n)}))}))},e.getUIPrefabRes=function(e,n){this.loadRes("ui/prefab/"+e,i,n)},e.createUI=function(e,n,o){this.getUIPrefabRes(e,(function(e,o){if(!e){var t=c(o);t.setPosition(0,0,0);var r=null;r=u("UIRoot"),console.log("createUI",r),r.addChild(t),n&&n(null,t)}}))},e.loadModelResArr=function(e,n,o,r){var c=n.map((function(n){return e+"/"+n}));t.load(c,i,o,r)},e}())||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/Rune.ts",["cc"],(function(n){var u;return{setters:[function(n){u=n.cclegacy}],execute:function(){u._RF.push({},"849d2shKD9K0pCd2VMQG697","Rune",void 0);n("Rune",function(){function n(){}var u=n.prototype;return u.equip=function(){},u.unequip=function(){},n}());u._RF.pop()}}}));

System.register("chunks:///_virtual/shiting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IEffectContainer.ts","./logUtil.ts"],(function(t){var i,n,e,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.Effect},function(t){o=t.logUtil}],execute:function(){n._RF.push({},"3e5aeDoT6xD0qMaP9JcdUWq","shiting",void 0);t("shiting",function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var e=n.prototype;return e.apply=function(t){o.instance.log("test002","时停开始"),this.timerId=setTimeout((function(){o.instance.log("test002","时停结束")}),this.duration)},e.remove=function(t){o.instance.log("test002","时停终止"),clearTimeout(this.timerId),this.timerId=null},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/Skill.ts",["cc","./Util.ts"],(function(t){var i,s;return{setters:[function(t){i=t.cclegacy},function(t){s=t.Util}],execute:function(){i._RF.push({},"0641a3yoqBJC6zjqG0gn/97","Skill",void 0);t("Skill",function(){function t(t){this.id=void 0,this.lastUsedTime=void 0,this.cd=void 0,this.level=void 0,this.duration=void 0,this.id=t.id,this.lastUsedTime=t.lastUsedTime,this.level=t.level,this.duration=t.duration,this.cd=s._stringToArrayByComma(t.cd)}var i=t.prototype;return i.canCast=function(){return!1},i.cast=function(t,i){},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/test.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IEffectContainer.ts","./logUtil.ts"],(function(t){var e,n,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.Effect},function(t){o=t.logUtil}],execute:function(){n._RF.push({},"7fe6aKr/QFPNYEpdfH+EtEt","test",void 0);t("test",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.apply=function(t){o.instance.log("test002","通用测试开始"),this.timerId=setTimeout((function(){o.instance.log("test002","通用测试结束")}),this.duration)},i.remove=function(t){o.instance.log("test002","通用测试终止"),clearTimeout(this.timerId),this.timerId=null},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelCon.ts"],(function(e){var o,t,n,r,c;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,r=e.Component},function(e){c=e.LevelCon}],execute:function(){var u;t._RF.push({},"ede3boagb5PooEfgOTaozu5","UIGame",void 0);var i=n.ccclass,s=n.requireComponent;e("UIGame",i("UIGame")(u=s(c)(u=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){},t}(r))||u)||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/Util.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"53455LopwBBrZ6DUJ96z/AG","Util",void 0);t("Util",function(){function t(){}return t._stringToArrayByComma=function(t){if(t)return t.split(",").map((function(t){return Number(t.trim())}))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/wudi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IEffectContainer.ts","./logUtil.ts"],(function(t){var i,n,e,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.Effect},function(t){o=t.logUtil}],execute:function(){n._RF.push({},"241c2zlLetLbJJRq/ck0Ymf","wudi",void 0);t("wudi",function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var e=n.prototype;return e.apply=function(t){o.instance.log("test002","无敌开始"),this.timerId=setTimeout((function(){o.instance.log("test002","无敌结束")}),this.duration)},e.remove=function(t){o.instance.log("test002","无敌终止"),clearTimeout(this.timerId),this.timerId=null},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/yingshi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./IEffectContainer.ts","./logUtil.ts"],(function(t){var i,n,e,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.Effect},function(t){o=t.logUtil}],execute:function(){n._RF.push({},"2fe0dRMtJ5Pqq91EwXo9fh1","yingshi",void 0);t("yingshi",function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var e=n.prototype;return e.apply=function(t){o.instance.log("test002","影侍开始"),this.timerId=setTimeout((function(){o.instance.log("test002","影侍结束")}),this.duration)},e.remove=function(t){o.instance.log("test002","影侍终止"),clearTimeout(this.timerId),this.timerId=null},n}(e));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});